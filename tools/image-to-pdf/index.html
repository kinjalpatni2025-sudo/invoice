<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Image to PDF Converter — Smarttool Hub</title>
<meta name="description" content="Convert multiple PNG/JPG images into a PDF — maintain original size, auto margin, rotate images, and combine multiple per page. Free and secure.">
<link rel="icon" type="image/png" href="https://img.icons8.com/fluency/48/toolbox.png">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<style>
body{font-family:Arial,sans-serif;background:#121826;color:#fff;margin:0;padding:0}
header{background:linear-gradient(90deg,#6366f1,#0ea5e9);padding:15px;text-align:center;box-shadow:0 4px 12px rgba(0,0,0,0.4)}
header h1{margin:0;font-size:1.8rem;color:#fff}
header p{margin:5px 0;color:#e0f2fe}
.container{max-width:900px;margin:20px auto;padding:20px;background:#1e293b;border-radius:10px;box-shadow:0 4px 10px rgba(0,0,0,0.5)}
.drop{border:2px dashed rgba(255,255,255,0.2);padding:20px;text-align:center;border-radius:8px;margin-top:10px}
input[type=file]{display:none}
.btn{background:linear-gradient(90deg,#0ea5a5,#60a5fa);padding:10px 15px;color:#022;font-weight:600;text-decoration:none;border:none;border-radius:8px;cursor:pointer}
.preview{display:flex;flex-wrap:wrap;gap:10px;margin-top:15px;justify-content:center}
.preview-item{position:relative;border-radius:4px;overflow:hidden;background:#0f172a;padding:5px}
.options{margin-top:20px;display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:12px}
label{display:block;margin-bottom:4px;color:#94a3b8}
select,input[type=color]{width:100%;padding:6px;border-radius:4px;border:none}
.delete-btn,.rotate-btn{
  position:absolute;top:5px;background:rgba(0,0,0,0.6);color:white;border:none;border-radius:50%;width:24px;height:24px;cursor:pointer;font-size:14px;line-height:20px;text-align:center
}
.delete-btn{right:5px}
.rotate-btn{left:5px}
.delete-btn:hover{background:red}
.rotate-btn:hover{background:#0ea5e9}
.back-home{display:inline-block;margin-bottom:10px;padding:8px 12px;background:#0ea5e9;color:#fff;border-radius:6px;text-decoration:none}
</style>
</head>
<body>
<header>
<h1><i class="fa-solid fa-file-arrow-down"></i> Image to PDF Converter</h1>
<p>Maintain original size • Auto margin • Rotate • Multiple per page</p>
</header>
<div class="container">
<a href="../../index.html" class="back-home"><i class="fa fa-arrow-left"></i> Back to Home</a>

<div class="drop" id="drop">
  <p>Drag & drop images here or</p>
  <button class="btn" id="pick">Select Images</button>
  <input type="file" id="files" accept="image/*" multiple>
</div>

<div class="options">
  <div>
    <label>Images per page</label>
    <select id="layout">
      <option value="1">1 × 1</option>
      <option value="4">2 × 2</option>
      <option value="9">3 × 3</option>
    </select>
  </div>
  <div>
    <label>Page Background Color</label>
    <input type="color" id="bgColor" value="#ffffff">
  </div>
</div>

<div class="preview" id="preview"></div>
<button class="btn" id="generate" style="margin-top:20px">Convert to PDF</button>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<script>
const { jsPDF } = window.jspdf;
const filesEl = document.getElementById('files');
const pickBtn = document.getElementById('pick');
const drop = document.getElementById('drop');
const preview = document.getElementById('preview');
const generate = document.getElementById('generate');
const layoutSel = document.getElementById('layout');
const bgColor = document.getElementById('bgColor');

let images = [];

pickBtn.addEventListener('click', () => filesEl.click());
filesEl.addEventListener('change', e => handleFilesList(Array.from(e.target.files)));
['dragenter','dragover'].forEach(ev=>drop.addEventListener(ev,e=>{e.preventDefault();drop.style.borderColor='#0ea5a5'}));
['dragleave','drop'].forEach(ev=>drop.addEventListener(ev,e=>{e.preventDefault();drop.style.borderColor='rgba(255,255,255,0.2)'}));
drop.addEventListener('drop', e => {e.preventDefault();handleFilesList(Array.from(e.dataTransfer.files));});

function handleFilesList(list){
  const imageFiles = list.filter(f => f.type.startsWith('image/'));
  imageFiles.forEach(file => {
    const reader = new FileReader();
    reader.onload = ev => {
      images.push({src: ev.target.result, rotation: 0});
      renderPreviews();
    };
    reader.readAsDataURL(file);
  });
}

function renderPreviews(){
  preview.innerHTML = '';
  images.forEach((imgObj, idx) => {
    const img = new Image();
    img.src = imgObj.src;
    img.style.maxWidth = "150px";
    img.style.transform = `rotate(${imgObj.rotation}deg)`;

    const wrapper = document.createElement('div');
    wrapper.className = 'preview-item';

    const delBtn = document.createElement('button');
    delBtn.className = 'delete-btn';
    delBtn.innerHTML = '&times;';
    delBtn.onclick = () => { images.splice(idx, 1); renderPreviews(); };

    const rotBtn = document.createElement('button');
    rotBtn.className = 'rotate-btn';
    rotBtn.innerHTML = '⟳';
    rotBtn.onclick = () => { imgObj.rotation = (imgObj.rotation + 90) % 360; renderPreviews(); };

    wrapper.appendChild(delBtn);
    wrapper.appendChild(rotBtn);
    wrapper.appendChild(img);
    preview.appendChild(wrapper);
  });
}

generate.addEventListener('click', () => {
  if(images.length === 0){alert('Please select at least one image.');return;}
  const perPage = parseInt(layoutSel.value);
  const pdf = new jsPDF();
  let pageImages = [];

  images.forEach((imgObj, idx) => {
    pageImages.push(imgObj);
    if(pageImages.length === perPage || idx === images.length - 1){
      addImagesToPDF(pdf, pageImages, perPage);
      pageImages = [];
      if(idx !== images.length - 1) pdf.addPage();
    }
  });

  pdf.save('images.pdf');
});

function addImagesToPDF(pdf, imgs, perPage){
  const gridSize = Math.sqrt(perPage);
  const pageW = pdf.internal.pageSize.getWidth();
  const pageH = pdf.internal.pageSize.getHeight();
  const cellW = pageW / gridSize;
  const cellH = pageH / gridSize;

  pdf.setFillColor(bgColor.value);
  pdf.rect(0, 0, pageW, pageH, 'F');

  imgs.forEach((imgObj, i) => {
    const imgProps = pdf.getImageProperties(imgObj.src);
    let iw = cellW;
    let ih = (imgProps.height * iw) / imgProps.width;
    if(ih > cellH){ ih = cellH; iw = (imgProps.width * ih) / imgProps.height; }
    const col = i % gridSize;
    const row = Math.floor(i / gridSize);
    const x = col * cellW + (cellW - iw)/2;
    const y = row * cellH + (cellH - ih)/2;
    pdf.addImage(imgObj.src, 'JPEG', x, y, iw, ih, undefined, 'FAST', imgObj.rotation);
  });
}
</script>
</body>
</html>
