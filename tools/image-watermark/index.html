<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Image Watermark Online — Add Text or Logo Watermark Free</title>
  <meta name="description" content="Add text or logo watermarks to images online. Choose font, color, outline, tiled watermark, or upload a logo. Live preview and PNG/JPG download. 100% client-side, free tool.">
  <link rel="icon" type="image/png" href="https://img.icons8.com/fluency/48/toolbox.png"/>
  <style>
    body{margin:0;font-family:Arial,Helvetica,sans-serif;background:#0f1724;color:#e6eef8}
    header{background:linear-gradient(90deg,#6366f1,#0ea5e9);padding:12px 16px;display:flex;justify-content:space-between;align-items:center;position:sticky;top:0}
    header h1{margin:0;font-size:18px}
    header a{background:#fff;color:#0b1220;padding:6px 10px;border-radius:10px;font-weight:bold;text-decoration:none}
    .wrap{max-width:1100px;margin:20px auto;padding:12px}
    .grid{display:grid;grid-template-columns:320px 1fr;gap:14px}
    @media(max-width:900px){.grid{grid-template-columns:1fr}}
    .panel{background:#0b1220;padding:12px;border-radius:12px;border:1px solid rgba(255,255,255,.08)}
    .controls{margin:8px 0}
    label{display:block;margin-bottom:6px;font-size:13px;color:#9aa8bf}
    input,select{width:100%;padding:6px;border-radius:8px;border:1px solid rgba(255,255,255,.1);background:#0f1724;color:#fff}
    input[type=color]{padding:0;height:36px;width:50px}
    .btn{background:#6366f1;color:#fff;border:none;padding:8px 12px;border-radius:8px;cursor:pointer;margin-top:6px}
    .btn.ghost{background:transparent;border:1px solid #6366f1;color:#fff}
    .stage{background:#0a0f1a;border:1px solid rgba(255,255,255,.08);border-radius:12px;display:flex;justify-content:center;align-items:center;min-height:400px;position:relative}
    canvas{max-width:100%;display:none}
    .progress{width:100%;height:12px;background:#1b253a;border-radius:8px;overflow:hidden;margin-top:10px}
    .bar{height:100%;width:0;background:linear-gradient(90deg,#6366f1,#0ea5e9);transition:width .2s}
    .row{display:flex;gap:10px;flex-wrap:wrap}
    .muted{color:#9aa8bf;font-size:13px}
  </style>
</head>
<body>
<header>
  <h1>Image Watermark Tool</h1>
  <a href="../../index.html">← Back to Home</a>
</header>
<div class="wrap">
  <div class="grid">
    <!-- Left Panel -->
    <aside class="panel">
      <h3>Upload Image</h3>
      <input type="file" id="fileInput" accept="image/png,image/jpeg">
      <hr>
      <h3>Watermark Options</h3>
      <label>Watermark Text</label>
      <input id="wmText" type="text" placeholder="© Smarttool Hub">
      <label>Font Size</label>
      <input id="fontSize" type="number" value="36">
      <label>Color</label>
      <input id="fontColor" type="color" value="#ffffff">
      <label>Opacity (%)</label>
      <input id="opacity" type="range" min="0" max="100" value="80">
      <label>Font Family</label>
      <select id="fontFamily">
        <option value="Arial">Arial</option>
        <option value="'Times New Roman'">Times New Roman</option>
        <option value="Courier New">Courier New</option>
      </select>
      <label>Position</label>
      <select id="position">
        <option value="bottom-right">Bottom Right</option>
        <option value="bottom-left">Bottom Left</option>
        <option value="top-right">Top Right</option>
        <option value="top-left">Top Left</option>
        <option value="center">Center</option>
      </select>
      <label>Margin (px)</label>
      <input id="margin" type="number" value="16">
      <label><input type="checkbox" id="outlineChk"> Add Outline/Stroke</label>
      <div class="row">
        <label style="flex:1">Stroke Color<input type="color" id="strokeColor" value="#000000"></label>
        <label style="flex:1">Stroke Width<input type="number" id="strokeWidth" value="2"></label>
      </div>
      <label><input type="checkbox" id="tileChk"> Tile Diagonal Watermark</label>
      <hr>
      <h3>Logo Watermark</h3>
      <input type="file" id="logoInput" accept="image/png,image/jpeg">
      <label>Logo Size (%)</label>
      <input id="logoSize" type="number" value="20">
      <label>Logo Opacity (%)</label>
      <input id="logoOpacity" type="range" min="0" max="100" value="80">
      <label>Logo Position</label>
      <select id="logoPos">
        <option value="bottom-right">Bottom Right</option>
        <option value="bottom-left">Bottom Left</option>
        <option value="top-right">Top Right</option>
        <option value="top-left">Top Left</option>
        <option value="center">Center</option>
      </select>
      <hr>
      <h3>Export</h3>
      <label>Format</label>
      <select id="format">
        <option value="png">PNG</option>
        <option value="jpeg">JPG</option>
      </select>
      <input id="fileName" type="text" placeholder="image-watermarked">
      <button class="btn" id="downloadBtn">Download</button>
    </aside>

    <!-- Right Panel -->
    <main class="panel">
      <div class="stage">
        <canvas id="canvas"></canvas>
        <div id="placeholder" class="muted">Upload an image to preview</div>
      </div>
      <div class="progress"><div id="bar" class="bar"></div></div>
      <div id="status" class="muted">Idle</div>
    </main>
  </div>
</div>

<script>
const fileInput=document.getElementById('fileInput');
const canvas=document.getElementById('canvas');const ctx=canvas.getContext('2d');
const wmText=document.getElementById('wmText'),fontSize=document.getElementById('fontSize'),
fontColor=document.getElementById('fontColor'),opacity=document.getElementById('opacity'),
position=document.getElementById('position'),marginEl=document.getElementById('margin'),
fontFamily=document.getElementById('fontFamily'),outlineChk=document.getElementById('outlineChk'),
strokeColor=document.getElementById('strokeColor'),strokeWidth=document.getElementById('strokeWidth'),
tileChk=document.getElementById('tileChk'),logoInput=document.getElementById('logoInput'),
logoSize=document.getElementById('logoSize'),logoOpacity=document.getElementById('logoOpacity'),
logoPos=document.getElementById('logoPos'),format=document.getElementById('format'),
fileName=document.getElementById('fileName'),downloadBtn=document.getElementById('downloadBtn'),
bar=document.getElementById('bar'),status=document.getElementById('status'),
placeholder=document.getElementById('placeholder');
let img=new Image(),imgURL=null,logoImg=null;

function setProgress(p){bar.style.width=p+'%';} function setStatus(s){status.textContent=s;}

fileInput.addEventListener('change',async e=>{
  const f=e.target.files[0];if(!f)return;
  imgURL=URL.createObjectURL(f);
  img.src=imgURL; img.onload=()=>{canvas.width=img.width;canvas.height=img.height;canvas.style.display='block';placeholder.style.display='none';render();}
});
logoInput.addEventListener('change',e=>{
  const f=e.target.files[0];if(!f)return;
  const u=URL.createObjectURL(f); logoImg=new Image();logoImg.src=u;logoImg.onload=()=>{render();}
});

[wmText,fontSize,fontColor,opacity,position,marginEl,fontFamily,outlineChk,strokeColor,strokeWidth,tileChk,logoSize,logoOpacity,logoPos].forEach(el=>el.addEventListener('input',render));

function render(){
  if(!imgURL)return;
  ctx.clearRect(0,0,canvas.width,canvas.height);
  ctx.drawImage(img,0,0,canvas.width,canvas.height);
  const text=wmText.value;
  if(text){
    ctx.save();
    ctx.font=`${parseInt(fontSize.value)}px ${fontFamily.value}`;
    ctx.globalAlpha=opacity.value/100;ctx.fillStyle=fontColor.value;
    if(tileChk.checked){
      const step=parseInt(fontSize.value)*6;
      for(let y=-canvas.height;y<canvas.height*2;y+=step){
        for(let x=-canvas.width;x<canvas.width*2;x+=step){
          ctx.save();ctx.translate(x,y);ctx.rotate(-Math.PI/4);
          if(outlineChk.checked){ctx.lineWidth=parseInt(strokeWidth.value);ctx.strokeStyle=strokeColor.value;ctx.strokeText(text,0,0);}
          ctx.fillText(text,0,0);
          ctx.restore();
        }
      }
    }else{
      let x,y;ctx.textBaseline='middle';ctx.textAlign='center';
      if(position.value.includes('left'))ctx.textAlign='left';
      if(position.value.includes('right'))ctx.textAlign='right';
      if(position.value.startsWith('top'))ctx.textBaseline='top';
      if(position.value.startsWith('bottom'))ctx.textBaseline='bottom';
      const m=parseInt(marginEl.value);
      if(position.value=='center'){x=canvas.width/2;y=canvas.height/2;}
      if(position.value=='top-left'){x=m;y=m;}
      if(position.value=='top-right'){x=canvas.width-m;y=m;}
      if(position.value=='bottom-left'){x=m;y=canvas.height-m;}
      if(position.value=='bottom-right'){x=canvas.width-m;y=canvas.height-m;}
      if(outlineChk.checked){ctx.lineWidth=parseInt(strokeWidth.value);ctx.strokeStyle=strokeColor.value;ctx.strokeText(text,x,y);}
      ctx.fillText(text,x,y);
    }
    ctx.restore();
  }
  if(logoImg){
    const scale=logoSize.value/100; const w=img.width*scale,h=logoImg.height*(w/logoImg.width);
    let x,y; if(logoPos.value=='center'){x=img.width/2-w/2;y=img.height/2-h/2;}
    if(logoPos.value=='top-left'){x=10;y=10;}
    if(logoPos.value=='top-right'){x=img.width-w-10;y=10;}
    if(logoPos.value=='bottom-left'){x=10;y=img.height-h-10;}
    if(logoPos.value=='bottom-right'){x=img.width-w-10;y=img.height-h-10;}
    ctx.globalAlpha=logoOpacity.value/100;ctx.drawImage(logoImg,x,y,w,h);ctx.globalAlpha=1;
  }
}

downloadBtn.addEventListener('click',()=>{
  if(!imgURL)return alert('Upload image first');
  setProgress(30);setStatus('Preparing download...');
  canvas.toBlob(b=>{
    const a=document.createElement('a');a.href=URL.createObjectURL(b);
    const base=(fileName.value||'image-watermarked');a.download=base+'.'+format.value;
    a.click();URL.revokeObjectURL(a.href);setProgress(100);setStatus('Done');
  },'image/'+format.value,0.92);
});
</script>
</body>
</html>
