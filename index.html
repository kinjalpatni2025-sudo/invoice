<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>FastTools — All-in-One (Client-side tools)</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.5.13/cropper.min.css">
  <style>
    /* Insert the original CSS but shortened for brevity in this preview. Use full CSS when deploying. */
    :root{--primary:#1a237e;--accent:#00b0ff;--card-bg:#fff}
    *{box-sizing:border-box}
    body{font-family:Segoe UI, system-ui, sans-serif;margin:0;background:#eef2ff;color:#222}
    header{background:var(--primary);color:#fff;padding:12px 18px;display:flex;justify-content:space-between;align-items:center}
    .logo{font-weight:700}
    .main{padding:18px;max-width:1200px;margin:0 auto}
    .tools-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:16px}
    .tool-card{background:var(--card-bg);padding:14px;border-radius:10px;box-shadow:0 6px 18px rgba(20,20,60,0.06)}
    .tool-card h3{margin:6px 0}
    .use-tool-btn{background:var(--primary);color:#fff;border:0;padding:8px 12px;border-radius:6px;cursor:pointer}
    /* Modal */
    .modal{position:fixed;inset:0;background:rgba(0,0,0,0.5);display:none;align-items:center;justify-content:center;padding:20px}
    .modal.open{display:flex}
    .modal .panel{background:#fff;padding:18px;border-radius:10px;max-width:900px;width:100%;max-height:90vh;overflow:auto}
    .row{display:flex;gap:10px;flex-wrap:wrap}
    textarea, input[type=text], input[type=file], select{width:100%;padding:8px;margin-top:6px;border:1px solid #ddd;border-radius:6px}
    pre{background:#f8fafc;padding:10px;border-radius:6px;overflow:auto}
    .tool-actions{display:flex;gap:8px;margin-top:10px}
    .small{font-size:13px}
  </style>
</head>
<body>
  <header>
    <div class="logo"><i class="fas fa-tools"></i> Fast<span style="color:var(--accent)">Tools</span></div>
    <div style="color:#fff">Client-side demos — runs in Chrome/Firefox. No server required for these tools.</div>
  </header>

  <main class="main">
    <section>
      <h2>Tools (click "Open" to use)</h2>
      <div class="tools-grid" id="tools-grid">
        <!-- Cards added by JS for clarity -->
      </div>
    </section>
  </main>

  <!-- Modal / Tool panel -->
  <div id="modal" class="modal" role="dialog" aria-modal="true">
    <div class="panel">
      <button id="closeModal" style="float:right" class="small">Close ✕</button>
      <div id="toolContent"></div>
    </div>
  </div>

  <!-- Libraries -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.5.13/cropper.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/tesseract.js@4.1.3/dist/tesseract.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/qrcode/build/qrcode.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/uuid/9.0.0/uuidv4.min.js"></script>

  <script>
    /* ======= Tools list and simple metadata ======= */
    const tools = [
      {id:'image-converter', title:'Image Converter (JPG/PNG/WEBP)', category:'Image Tools'},
      {id:'image-compressor', title:'Image Compressor (quality)', category:'Image Tools'},
      {id:'image-resizer', title:'Image Resizer', category:'Image Tools'},
      {id:'image-cropper', title:'Image Cropper', category:'Image Tools'},
      {id:'image-ocr', title:'Image to Text (OCR)', category:'Image Tools'},
      {id:'base64', title:'Base64 Encoder / Decoder', category:'Web/Developer Tools'},
      {id:'json-format', title:'JSON Formatter & Validator', category:'Web/Developer Tools'},
      {id:'text-tools', title:'Text Tools (case, count, dedupe, reverse)', category:'Text Tools'},
      {id:'color-tools', title:'Color Picker & HEX↔RGB', category:'Color Tools'},
      {id:'qr-generator', title:'QR Code Generator', category:'Utility Tools'},
      {id:'uuid-generator', title:'UUID Generator', category:'Utility Tools'},
      {id:'password-generator', title:'Random Password Generator', category:'Utility Tools'},
      {id:'regex-tester', title:'Regex Tester', category:'Web/Developer Tools'},
      {id:'url-encode', title:'URL Encode / Decode', category:'Web/Developer Tools'},
      {id:'gradient-gen', title:'Gradient Generator', category:'Color Tools'},
      {id:'contrast-check', title:'Contrast Checker (WCAG)</', category:'Color Tools'}
    ];

    const grid = document.getElementById('tools-grid');
    tools.forEach(t => {
      const card = document.createElement('div'); card.className='tool-card';
      card.innerHTML = `<h3>${t.title}</h3><div class="small">${t.category}</div><div style="margin-top:10px"><button class='use-tool-btn' data-tool='${t.id}'>Open</button></div>`;
      grid.appendChild(card);
    });

    // Modal helpers
    const modal = document.getElementById('modal');
    const toolContent = document.getElementById('toolContent');
    document.getElementById('closeModal').onclick = () => { modal.classList.remove('open'); toolContent.innerHTML=''; };
    document.addEventListener('click', e => {
      if (e.target.matches('.use-tool-btn')) openTool(e.target.dataset.tool);
    });

    function openTool(id){
      modal.classList.add('open');
      toolContent.innerHTML = '<h2>Loading...</h2>';
      setTimeout(()=>{
        const fn = toolPanels[id];
        if (fn) { toolContent.innerHTML = ''; fn(toolContent); } else toolContent.innerHTML = '<p>Tool not implemented.</p>';
      },100);
    }

    /* ====== Tool panel implementations ====== */
    const toolPanels = {};

    // Utility: create element helpers
    function el(tag, props={}, children=[]){ const e=document.createElement(tag); Object.assign(e,props); if(typeof children==='string') e.innerHTML=children; else children.forEach(c=>e.appendChild(c)); return e; }

    // IMAGE CONVERTER (client-side using canvas)
    toolPanels['image-converter'] = (root)=>{
      root.appendChild(el('h2',{},'Image Converter'));
      root.appendChild(el('p',{},'Select image (PNG/JPG) and convert to another format (PNG, JPEG, WEBP).'));
      const file = el('input',{type:'file',accept:'image/*'});
      const select = el('select'); ['image/png','image/jpeg','image/webp'].forEach(m=>select.appendChild(el('option',{value:m},m)));
      const btn = el('button',{className:'use-tool-btn'},'Convert & Download');
      root.appendChild(file); root.appendChild(select); root.appendChild(btn);

      btn.onclick = async ()=>{
        if (!file.files[0]) return alert('Choose an image file');
        const img = new Image(); img.src = URL.createObjectURL(file.files[0]);
        await img.decode();
        const canvas = document.createElement('canvas'); canvas.width=img.naturalWidth; canvas.height=img.naturalHeight;
        const ctx = canvas.getContext('2d'); ctx.drawImage(img,0,0);
        const mime = select.value; const blob = await new Promise(r=> canvas.toBlob(r, mime, 0.92));
        const a = document.createElement('a'); a.href = URL.createObjectURL(blob); a.download = 'converted.' + mime.split('/')[1]; a.click();
      };
    };

    // IMAGE COMPRESSOR
    toolPanels['image-compressor'] = (root)=>{
      root.appendChild(el('h2',{},'Image Compressor'));
      root.appendChild(el('p',{},'Choose image and set quality (0.1 - 1). Works best for JPEG/WEBP output.'));
      const file = el('input',{type:'file',accept:'image/*'});
      const quality = el('input',{type:'number',min:0.1,max:1,step:0.05,value:0.8});
      const outSelect = el('select'); ['image/jpeg','image/webp'].forEach(m=>outSelect.appendChild(el('option',{value:m},m)));
      const btn = el('button',{className:'use-tool-btn'},'Compress & Download');
      root.appendChild(file); root.appendChild(el('label',{},'Quality:')); root.appendChild(quality); root.appendChild(el('label',{},'Output:')); root.appendChild(outSelect); root.appendChild(btn);
      btn.onclick = async ()=>{
        if(!file.files[0]) return alert('Select an image');
        const img = new Image(); img.src = URL.createObjectURL(file.files[0]); await img.decode();
        const canvas = document.createElement('canvas'); canvas.width=img.naturalWidth; canvas.height=img.naturalHeight; const ctx=canvas.getContext('2d'); ctx.drawImage(img,0,0);
        const q = parseFloat(quality.value) || 0.8; const mime = outSelect.value;
        canvas.toBlob(blob=>{ const a=document.createElement('a'); a.href=URL.createObjectURL(blob); a.download='compressed.'+mime.split('/')[1]; a.click(); }, mime, q);
      };
    };

    // IMAGE RESIZER
    toolPanels['image-resizer'] = (root)=>{
      root.appendChild(el('h2',{},'Image Resizer'));
      root.appendChild(el('p',{},'Resize image by width (px). Aspect ratio preserved.'));
      const file = el('input',{type:'file',accept:'image/*'});
      const width = el('input',{type:'number',value:800});
      const btn = el('button',{className:'use-tool-btn'},'Resize & Download');
      root.appendChild(file); root.appendChild(el('label',{},'Width (px):')); root.appendChild(width); root.appendChild(btn);
      btn.onclick = async ()=>{
        if(!file.files[0]) return alert('Select an image');
        const i = new Image(); i.src=URL.createObjectURL(file.files[0]); await i.decode();
        const w = parseInt(width.value)||i.naturalWidth; const h = Math.round(i.naturalHeight*(w/i.naturalWidth));
        const c = document.createElement('canvas'); c.width=w; c.height=h; c.getContext('2d').drawImage(i,0,0,w,h);
        c.toBlob(b=>{ const a=document.createElement('a'); a.href=URL.createObjectURL(b); a.download='resized.png'; a.click(); }, 'image/png');
      };
    };

    // IMAGE CROPPER (uses CropperJS)
    toolPanels['image-cropper'] = (root)=>{
      root.appendChild(el('h2',{},'Image Cropper'));
      root.appendChild(el('p',{},'Upload image, crop visually, then download cropped area.'));
      const file = el('input',{type:'file',accept:'image/*'});
      const img = el('img',{style:'max-width:100%;display:block;margin-top:10px'});
      const btnCrop = el('button',{className:'use-tool-btn'},'Crop & Download');
      root.appendChild(file); root.appendChild(img); root.appendChild(btnCrop);
      let cropper=null;
      file.onchange = ()=>{ if(file.files[0]){ img.src=URL.createObjectURL(file.files[0]); img.onload=()=>{ if(cropper) cropper.destroy(); cropper = new Cropper(img,{viewMode:1,autoCropArea:0.8}); }; } };
      btnCrop.onclick = ()=>{ if(!cropper) return alert('Load image and create a crop area first'); const canvas = cropper.getCroppedCanvas(); canvas.toBlob(b=>{ const a=document.createElement('a'); a.href=URL.createObjectURL(b); a.download='cropped.png'; a.click(); }); };
    };

    // IMAGE OCR (Tesseract.js)
    toolPanels['image-ocr'] = (root)=>{
      root.appendChild(el('h2',{},'Image to Text (OCR) — Tesseract.js'));
      root.appendChild(el('p',{},'Upload an image with text. OCR runs fully client-side.'));
      const file=el('input',{type:'file',accept:'image/*'});
      const out = el('textarea',{rows:10});
      const btn = el('button',{className:'use-tool-btn'},'Run OCR');
      root.appendChild(file); root.appendChild(btn); root.appendChild(out);
      btn.onclick = async ()=>{
        if(!file.files[0]) return alert('Choose an image');
        out.value = 'Recognizing... (this may take a few seconds)';
        const { data: { text } } = await Tesseract.recognize(file.files[0], 'eng', { logger:m=>console.log(m) });
        out.value = text;
      };
    };

    // BASE64 Encode/Decode
    toolPanels['base64'] = (root)=>{
      root.appendChild(el('h2',{},'Base64 Encoder / Decoder'));
      const txt = el('textarea',{rows:6,placeholder:'Paste text or choose a file to encode'});
      const file = el('input',{type:'file'});
      const btnEncode = el('button',{className:'use-tool-btn'},'Encode Text -> Base64');
      const btnDecode = el('button',{className:'use-tool-btn'},'Decode Base64 -> Text');
      root.appendChild(txt); root.appendChild(file); root.appendChild(el('div',{className:'tool-actions'},[btnEncode, btnDecode]));
      btnEncode.onclick = ()=>{ if(txt.value){ txt.value = btoa(unescape(encodeURIComponent(txt.value))); } else if(file.files[0]){ const r=new FileReader(); r.onload=()=>{ txt.value = btoa(r.result); }; r.readAsBinaryString(file.files[0]); } else alert('Provide text or file'); };
      btnDecode.onclick = ()=>{ try{ txt.value = decodeURIComponent(escape(atob(txt.value))); }catch(e){ alert('Invalid base64 string'); } };
    };

    // JSON Formatter & Validator
    toolPanels['json-format'] = (root)=>{
      root.appendChild(el('h2',{},'JSON Formatter & Validator'));
      const ta = el('textarea',{rows:12,placeholder:'Paste JSON here'});
      const btnPre = el('button',{className:'use-tool-btn'},'Format JSON');
      const btnMin = el('button',{className:'use-tool-btn'},'Minify JSON');
      root.appendChild(ta); root.appendChild(el('div',{className:'tool-actions'},[btnPre,btnMin]));
      btnPre.onclick = ()=>{ try{ const j=JSON.parse(ta.value); ta.value = JSON.stringify(j,null,2); }catch(e){ alert('Invalid JSON: '+e.message); } };
      btnMin.onclick = ()=>{ try{ const j=JSON.parse(ta.value); ta.value = JSON.stringify(j); }catch(e){ alert('Invalid JSON'); } };
    };

    // TEXT TOOLS (case, count, dedupe, reverse)
    toolPanels['text-tools'] = (root)=>{
      root.appendChild(el('h2',{},'Text Tools'));
      const ta = el('textarea',{rows:10,placeholder:'Paste text here'});
      const btnUpper = el('button',{className:'use-tool-btn'},'UPPERCASE');
      const btnLower = el('button',{className:'use-tool-btn'},'lowercase');
      const btnTitle = el('button',{className:'use-tool-btn'},'Title Case');
      const btnCount = el('button',{className:'use-tool-btn'},'Count Words/Chars');
      const btnDedupe = el('button',{className:'use-tool-btn'},'Remove Duplicate Lines');
      const btnReverse = el('button',{className:'use-tool-btn'},'Reverse Text');
      const out = el('div');
      root.appendChild(ta); root.appendChild(el('div',{className:'tool-actions'},[btnUpper,btnLower,btnTitle,btnCount,btnDedupe,btnReverse])); root.appendChild(out);
      btnUpper.onclick=()=>ta.value=ta.value.toUpperCase(); btnLower.onclick=()=>ta.value=ta.value.toLowerCase();
      btnTitle.onclick=()=>ta.value=ta.value.toLowerCase().replace(/(^|\s)\S/g,s=>s.toUpperCase());
      btnCount.onclick=()=>{ const words=(ta.value.match(/\S+/g)||[]).length; const chars=ta.value.length; out.innerText = `Words: ${words} — Characters: ${chars}`; };
      btnDedupe.onclick=()=>{ const lines=ta.value.split('\n'); ta.value=[...new Set(lines)].join('\n'); };
      btnReverse.onclick=()=>{ ta.value = ta.value.split('').reverse().join(''); };
    };

    // COLOR TOOLS
    toolPanels['color-tools'] = (root)=>{
      root.appendChild(el('h2',{},'Color Picker & HEX ↔ RGB'));
      const color = el('input',{type:'color',value:'#ff6600'});
      const hex = el('input',{type:'text',value:'#ff6600'});
      const rgb = el('input',{type:'text',value:'rgb(255,102,0)'});
      root.appendChild(el('label',{},'Pick color:')); root.appendChild(color);
      root.appendChild(el('label',{},'HEX:')); root.appendChild(hex);
      root.appendChild(el('label',{},'RGB:')); root.appendChild(rgb);
      color.oninput = ()=>{ hex.value = rgbToHex(color.value); rgb.value = hexToRgbString(hex.value); };
      hex.onchange = ()=>{ color.value = hex.value; rgb.value = hexToRgbString(hex.value); };
      rgb.onchange = ()=>{ const h = rgbStringToHex(rgb.value); if(h) { hex.value=h; color.value=h; } };
      function rgbToHex(c){ return c; }
      function hexToRgbString(hexVal){ const h=hexVal.replace('#',''); const r=parseInt(h.substr(0,2),16), g=parseInt(h.substr(2,2),16), b=parseInt(h.substr(4,2),16); return `rgb(${r}, ${g}, ${b})`; }
      function rgbStringToHex(s){ const m = s.match(/(\d{1,3})/g); if(!m) return null; return '#'+m.slice(0,3).map(n=>('0'+parseInt(n).toString(16)).slice(-2)).join(''); }
    };

    // QR CODE GENERATOR
    toolPanels['qr-generator'] = (root)=>{
      root.appendChild(el('h2',{},'QR Code Generator'));
      const url = el('input',{type:'text',placeholder:'Enter URL or text'});
      const btn = el('button',{className:'use-tool-btn'},'Generate');
      const canvas = el('div'); root.appendChild(url); root.appendChild(btn); root.appendChild(canvas);
      btn.onclick = ()=>{ canvas.innerHTML=''; QRCode.toCanvas(url.value || 'https://fasttools.example', { errorCorrectionLevel: 'H' }, function (err, c) { if(err) return alert(err); canvas.appendChild(c); }); };
    };

    // UUID Generator
    toolPanels['uuid-generator'] = (root)=>{
      root.appendChild(el('h2',{},'UUID Generator'));
      const out = el('input',{type:'text'}); const btn = el('button',{className:'use-tool-btn'},'Generate UUID');
      root.appendChild(out); root.appendChild(btn);
      btn.onclick = ()=>{ out.value = crypto.randomUUID ? crypto.randomUUID() : uuidv4(); };
    };

    // PASSWORD GENERATOR
    toolPanels['password-generator'] = (root)=>{
      root.appendChild(el('h2',{},'Random Password Generator'));
      const lengthInput = el('input',{type:'number',value:16,min:4,max:128});
      const out = el('input',{type:'text'});
      const btn = el('button',{className:'use-tool-btn'},'Generate');
      root.appendChild(el('label',{},'Length:')); root.appendChild(lengthInput); root.appendChild(btn); root.appendChild(out);
      btn.onclick = ()=>{ const L = parseInt(lengthInput.value)||16; const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!@#$%^&*()_+-=[]{}|;:,.<>?'; let s=''; const arr = new Uint32Array(L); crypto.getRandomValues(arr); for(let i=0;i<L;i++) s+=chars[arr[i] % chars.length]; out.value=s; };
    };

    // REGEX TESTER
    toolPanels['regex-tester'] = (root)=>{
      root.appendChild(el('h2',{},'Regex Tester'));
      const pattern = el('input',{type:'text',placeholder:'Enter regex without /slashes/, e.g. \b\w+\b'});
      const flags = el('input',{type:'text',placeholder:'flags (gimsuy)'});
      const text = el('textarea',{rows:8,placeholder:'Test text here'});
      const btn = el('button',{className:'use-tool-btn'},'Test'); const out = el('pre');
      root.appendChild(el('label',{},'Pattern:')); root.appendChild(pattern); root.appendChild(el('label',{},'Flags:')); root.appendChild(flags); root.appendChild(text); root.appendChild(btn); root.appendChild(out);
      btn.onclick = ()=>{
        try{
          const r = new RegExp(pattern.value, flags.value);
          const matches = text.value.match(r);
          out.innerText = matches ? JSON.stringify(matches, null, 2) : 'No match';
        }catch(e){ out.innerText = 'Regex error: '+e.message }
      };
    };

    // URL Encode/Decode
    toolPanels['url-encode'] = (root)=>{
      root.appendChild(el('h2',{},'URL Encode / Decode'));
      const ta = el('textarea',{rows:6});
      const btnE = el('button',{className:'use-tool-btn'},'Encode');
      const btnD = el('button',{className:'use-tool-btn'},'Decode');
      root.appendChild(ta); root.appendChild(el('div',{className:'tool-actions'},[btnE,btnD]));
      btnE.onclick = ()=> ta.value = encodeURIComponent(ta.value);
      btnD.onclick = ()=> { try{ ta.value = decodeURIComponent(ta.value); }catch(e){ alert('Invalid encoding') } };
    };

    // GRADIENT GENERATOR
    toolPanels['gradient-gen'] = (root)=>{
      root.appendChild(el('h2',{},'Gradient Generator'));
      const c1 = el('input',{type:'color',value:'#ff5f6d'});
      const c2 = el('input',{type:'color',value:'#ffc371'});
      const angle = el('input',{type:'number',value:90});
      const preview = el('div',{style:'height:120px;border-radius:8px;margin-top:10px'});
      const cssOut = el('pre');
      const btn = el('button',{className:'use-tool-btn'},'Create');
      root.appendChild(el('label',{},'Color 1:')); root.appendChild(c1);
      root.appendChild(el('label',{},'Color 2:')); root.appendChild(c2);
      root.appendChild(el('label',{},'Angle (deg):')); root.appendChild(angle);
      root.appendChild(btn); root.appendChild(preview); root.appendChild(cssOut);
      btn.onclick = ()=>{ const g = `linear-gradient(${angle.value}deg, ${c1.value}, ${c2.value})`; preview.style.background = g; cssOut.innerText = `background: ${g};`; };
    };

    // CONTRAST CHECKER (simple luminance contrast ratio)
    toolPanels['contrast-check'] = (root)=>{
      root.appendChild(el('h2',{},'Contrast Checker (WCAG)'));
      const fg = el('input',{type:'color',value:'#000000'});
      const bg = el('input',{type:'color',value:'#ffffff'});
      const out = el('div'); const btn = el('button',{className:'use-tool-btn'},'Check');
      root.appendChild(el('label',{},'Foreground:')); root.appendChild(fg);
      root.appendChild(el('label',{},'Background:')); root.appendChild(bg);
      root.appendChild(btn); root.appendChild(out);
      btn.onclick = ()=>{ const ratio = contrastRatio(fg.value,bg.value); out.innerText = `Contrast ratio: ${ratio.toFixed(2)} — ${scoreFor(ratio)}`; };
      function luminance(hex){ const h=hex.replace('#',''); const r=parseInt(h.substr(0,2),16)/255, g=parseInt(h.substr(2,2),16)/255, b=parseInt(h.substr(4,2),16)/255; const a=[r,g,b].map(c=> c<=0.03928? c/12.92: Math.pow((c+0.055)/1.055,2.4)); return 0.2126*a[0]+0.7152*a[1]+0.0722*a[2]; }
      function contrastRatio(a,b){ const L1=luminance(a), L2=luminance(b); return (Math.max(L1,L2)+0.05)/(Math.min(L1,L2)+0.05); }
      function scoreFor(r){ if(r>=7) return 'AAA (normal text)'; if(r>=4.5) return 'AA (normal text)'; if(r>=3) return 'AA Large'; return 'Fail'; }
    };

    /* ====== End of tool panels ====== */

    // Close modal on background click
    modal.addEventListener('click', (e)=>{ if(e.target===modal) { modal.classList.remove('open'); toolContent.innerHTML=''; } });

    // Small polyfills / helpers loaded (uuid fallback)
    function uuidv4(){ return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c){ var r=Math.random()*16|0,v=c=='x'?r:(r&0x3|0x8); return v.toString(16); }); }
  </script>
</body>
</html>
